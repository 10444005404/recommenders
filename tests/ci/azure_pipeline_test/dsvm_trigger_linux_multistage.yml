# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License.
#
# A Github Service Connection must also be created with the name "AI-GitHub"
# https://docs.microsoft.com/en-us/azure/devops/pipelines/process/demands?view=azure-devops&tabs=yaml

resources:
  repositories:
    - repository: aitemplates
      type: github
      name: microsoft/AI
      endpoint: AI-GitHub

# Pull request against these branches will trigger this build
pr:
- master
- staging

#Any commit to this branch will trigger the build.
trigger:
- staging
- master

variables:
- group: LinuxAgentPool

stages:
  - template: stages/linux_test_stages.yml
    parameters:
      stage_name: "Unit"
      job_name: unit
      conda_env_root: reco
      Agent_Pool: $(Agent_Pool)
      notebook_tests: true

  - template: stages/linux_test_stages.yml
    parameters:
      stage_name: "Notebook"
      job_name: notebook
      conda_env_root: reco
      Agent_Pool: $(Agent_Pool)
      notebook_tests: true
